{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule, HttpHeaders } from '@angular/common/http';\nimport { SidebarComponent } from './sidebar/sidebar.component';\nimport { ToolbarComponent } from './toolbar/toolbar.component';\nimport { CreateEditDialogComponent } from './create-edit-dialog/create-edit-dialog';\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"text-gray-400 cursor-not-allowed\": a0,\n  \"text-indigo-600 hover:text-indigo-800\": a1\n});\nconst _c1 = (a0, a1) => ({\n  \"text-gray-300 cursor-not-allowed\": a0,\n  \"text-rose-600 hover:text-rose-800\": a1\n});\nfunction DashboardViewComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function DashboardViewComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.createTask());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 12);\n    i0.ɵɵelement(2, \"path\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" New Task \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardViewComponent_ng_container_9_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 21)(1, \"td\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 23);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 24);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 22)(8, \"span\", 25);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\", 26)(11, \"div\", 27)(12, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function DashboardViewComponent_ng_container_9_tr_15_Template_button_click_12_listener() {\n      const task_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.canEdit() && ctx_r2.editTask(task_r5));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(13, \"svg\", 29);\n    i0.ɵɵelement(14, \"path\", 30)(15, \"path\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(16, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function DashboardViewComponent_ng_container_9_tr_15_Template_button_click_16_listener() {\n      const task_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.canDelete() && ctx_r2.confirmDelete(task_r5));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(17, \"svg\", 29);\n    i0.ɵɵelement(18, \"path\", 33)(19, \"path\", 34)(20, \"path\", 35)(21, \"path\", 36);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const task_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r6 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(task_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(task_r5.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.getStatusClass(task_r5.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(task_r5.status);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.canEdit())(\"ngClass\", i0.ɵɵpureFunction2(9, _c0, !ctx_r2.canEdit(), ctx_r2.canEdit()));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.canDelete())(\"ngClass\", i0.ɵɵpureFunction2(12, _c1, !ctx_r2.canDelete(), ctx_r2.canDelete()));\n  }\n}\nfunction DashboardViewComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 14)(2, \"table\", 15)(3, \"thead\", 16)(4, \"tr\")(5, \"th\", 17);\n    i0.ɵɵtext(6, \"#\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 17);\n    i0.ɵɵtext(8, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 17);\n    i0.ɵɵtext(10, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 17);\n    i0.ɵɵtext(12, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"th\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"tbody\", 19);\n    i0.ɵɵtemplate(15, DashboardViewComponent_ng_container_9_tr_15_Template, 22, 15, \"tr\", 20);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.tasks);\n  }\n}\nfunction DashboardViewComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" No tasks available. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardViewComponent_app_create_edit_dialog_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-create-edit-dialog\", 38);\n    i0.ɵɵlistener(\"close\", function DashboardViewComponent_app_create_edit_dialog_12_Template_app_create_edit_dialog_close_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    })(\"save\", function DashboardViewComponent_app_create_edit_dialog_12_Template_app_create_edit_dialog_save_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.saveTask());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"isEditMode\", ctx_r2.isEditMode)(\"newTask\", ctx_r2.newTask);\n  }\n}\nfunction DashboardViewComponent_app_confirm_delete_dialog_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-confirm-delete-dialog\", 39);\n    i0.ɵɵlistener(\"cancel\", function DashboardViewComponent_app_confirm_delete_dialog_13_Template_app_confirm_delete_dialog_cancel_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.cancelDelete());\n    })(\"confirm\", function DashboardViewComponent_app_confirm_delete_dialog_13_Template_app_confirm_delete_dialog_confirm_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteTask());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"task\", ctx_r2.taskToDelete);\n  }\n}\nexport let DashboardViewComponent = /*#__PURE__*/(() => {\n  class DashboardViewComponent {\n    http;\n    selectedRole = 'Viewer';\n    tasks = [];\n    showModal = false;\n    dropdownOpen = false;\n    newTask = {\n      id: null,\n      title: '',\n      category: '',\n      status: 'Not Started'\n    };\n    taskToDelete = null;\n    showDeleteConfirm = false;\n    isEditMode = false;\n    constructor(http) {\n      this.http = http;\n    }\n    ngOnInit() {\n      const savedRole = localStorage.getItem('user_role');\n      this.selectedRole = savedRole || 'Viewer';\n      this.loadTasks();\n    }\n    getHeaders() {\n      return new HttpHeaders({\n        'x-user-role': this.selectedRole\n      });\n    }\n    loadTasks() {\n      this.http.get('/api/tasks', {\n        headers: this.getHeaders()\n      }).subscribe({\n        next: res => {\n          this.tasks = res;\n        },\n        error: err => {\n          console.error('Failed to load tasks', err);\n        }\n      });\n    }\n    canEdit() {\n      return this.selectedRole === 'Admin' || this.selectedRole === 'Owner';\n    }\n    canDelete() {\n      return this.selectedRole === 'Admin';\n    }\n    getStatusClass(status) {\n      switch (status) {\n        case 'Completed':\n          return 'bg-green-100 text-green-700';\n        case 'Pending':\n          return 'bg-yellow-100 text-yellow-700';\n        case 'Not Started':\n          return 'bg-gray-100 text-gray-700';\n        default:\n          return 'bg-gray-100 text-gray-700';\n      }\n    }\n    setRole(role) {\n      this.selectedRole = role;\n      localStorage.setItem('user_role', role);\n      this.loadTasks();\n    }\n    logout() {\n      localStorage.removeItem('user_role');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n    createTask() {\n      this.showModal = true;\n      this.isEditMode = false;\n      this.newTask = {\n        id: null,\n        title: '',\n        category: '',\n        status: 'Not Started'\n      };\n    }\n    editTask(task) {\n      this.showModal = true;\n      this.isEditMode = true;\n      this.newTask = {\n        ...task\n      };\n    }\n    closeModal() {\n      this.showModal = false;\n    }\n    saveTask() {\n      if (this.newTask.title && this.newTask.category) {\n        const method = this.isEditMode ? this.http.patch(`/api/tasks/${this.newTask.id}`, this.newTask, {\n          headers: this.getHeaders()\n        }) : this.http.post('/api/tasks', this.newTask, {\n          headers: this.getHeaders()\n        });\n        method.subscribe({\n          next: () => {\n            this.loadTasks();\n            this.closeModal();\n          },\n          error: err => {\n            console.error('Failed to save task', err);\n          }\n        });\n      }\n    }\n    confirmDelete(task) {\n      this.taskToDelete = task;\n      this.showDeleteConfirm = true;\n    }\n    cancelDelete() {\n      this.taskToDelete = null;\n      this.showDeleteConfirm = false;\n    }\n    deleteTask() {\n      if (!this.taskToDelete) return;\n      this.http.delete(`/api/tasks/${this.taskToDelete.id}`, {\n        headers: this.getHeaders()\n      }).subscribe({\n        next: () => {\n          this.loadTasks();\n          this.cancelDelete();\n        },\n        error: err => {\n          console.error('Failed to delete task', err);\n          this.cancelDelete();\n        }\n      });\n    }\n    static ɵfac = function DashboardViewComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || DashboardViewComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardViewComponent,\n      selectors: [[\"app-dashboard-view\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 14,\n      vars: 6,\n      consts: [[\"noTasks\", \"\"], [1, \"min-h-screen\", \"flex\", \"flex-col\", \"md:flex-row\", \"bg-gradient-to-r\", \"from-purple-100\", \"via-blue-100\", \"to-pink-100\"], [1, \"flex\", \"flex-col\", \"flex-grow\"], [3, \"roleChanged\", \"logoutClicked\", \"selectedRole\"], [1, \"flex-grow\", \"px-6\", \"py-6\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-4\"], [1, \"text-lg\", \"font-semibold\", \"text-gray-700\"], [\"class\", \"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-medium px-4 py-2 rounded-lg shadow flex items-center gap-2\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [3, \"isEditMode\", \"newTask\", \"close\", \"save\", 4, \"ngIf\"], [3, \"task\", \"cancel\", \"confirm\", 4, \"ngIf\"], [1, \"bg-gradient-to-r\", \"from-purple-500\", \"to-pink-500\", \"hover:from-purple-600\", \"hover:to-pink-600\", \"text-white\", \"font-medium\", \"px-4\", \"py-2\", \"rounded-lg\", \"shadow\", \"flex\", \"items-center\", \"gap-2\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"viewBox\", \"0 0 24 24\", 1, \"h-5\", \"w-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 4v16m8-8H4\"], [1, \"overflow-x-auto\", \"rounded-lg\", \"bg-white\", \"shadow-lg\", \"border\", \"border-gray-100\"], [1, \"min-w-full\", \"divide-y\", \"divide-gray-200\", \"text-sm\"], [1, \"bg-purple-100\", \"text-purple-800\", \"uppercase\", \"tracking-wide\"], [1, \"px-6\", \"py-3\", \"text-left\"], [1, \"px-6\", \"py-3\", \"text-left\", \"w-12\"], [1, \"divide-y\", \"divide-gray-100\"], [\"class\", \"group hover:bg-purple-50 transition\", 4, \"ngFor\", \"ngForOf\"], [1, \"group\", \"hover:bg-purple-50\", \"transition\"], [1, \"px-6\", \"py-3\"], [1, \"px-6\", \"py-3\", \"font-medium\", \"text-gray-900\"], [1, \"px-6\", \"py-3\", \"text-gray-600\"], [1, \"px-2\", \"py-1\", \"text-xs\", \"font-semibold\", \"rounded-full\", 3, \"ngClass\"], [1, \"px-6\", \"py-3\", \"text-right\"], [1, \"opacity-0\", \"group-hover:opacity-100\", \"transition-opacity\", \"duration-200\", \"flex\", \"justify-end\", \"gap-4\", \"items-center\"], [\"aria-label\", \"Edit Task\", 1, \"transition\", 3, \"click\", \"disabled\", \"ngClass\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"1.8\", \"viewBox\", \"0 0 24 24\", 1, \"h-6\", \"w-6\"], [\"d\", \"M12 20h9\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4 12.5-12.5z\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"aria-label\", \"Delete Task\", 1, \"transition\", 3, \"click\", \"disabled\", \"ngClass\"], [\"d\", \"M3 6h18\", \"stroke-linecap\", \"round\"], [\"d\", \"M8 6v14a2 2 0 002 2h4a2 2 0 002-2V6\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M10 11v6M14 11v6\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M9 6V4a1 1 0 011-1h4a1 1 0 011 1v2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [1, \"bg-white\", \"text-gray-600\", \"text-center\", \"py-12\", \"rounded-lg\", \"shadow\", \"border\", \"border-gray-200\"], [3, \"close\", \"save\", \"isEditMode\", \"newTask\"], [3, \"cancel\", \"confirm\", \"task\"]],\n      template: function DashboardViewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1);\n          i0.ɵɵelement(1, \"app-sidebar\");\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"app-toolbar\", 3);\n          i0.ɵɵlistener(\"roleChanged\", function DashboardViewComponent_Template_app_toolbar_roleChanged_3_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setRole($event));\n          })(\"logoutClicked\", function DashboardViewComponent_Template_app_toolbar_logoutClicked_3_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.logout());\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"main\", 4)(5, \"div\", 5)(6, \"h3\", 6);\n          i0.ɵɵtext(7, \"\\uD83D\\uDCCB Task List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(8, DashboardViewComponent_button_8_Template, 4, 0, \"button\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, DashboardViewComponent_ng_container_9_Template, 16, 1, \"ng-container\", 8)(10, DashboardViewComponent_ng_template_10_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(12, DashboardViewComponent_app_create_edit_dialog_12_Template, 1, 2, \"app-create-edit-dialog\", 9)(13, DashboardViewComponent_app_confirm_delete_dialog_13_Template, 1, 1, \"app-confirm-delete-dialog\", 10);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const noTasks_r9 = i0.ɵɵreference(11);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"selectedRole\", ctx.selectedRole);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.canEdit());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.tasks.length > 0)(\"ngIfElse\", noTasks_r9);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showDeleteConfirm);\n        }\n      },\n      dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, FormsModule, HttpClientModule, SidebarComponent, ToolbarComponent, CreateEditDialogComponent, ConfirmDeleteDialogComponent]\n    });\n  }\n  return DashboardViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}